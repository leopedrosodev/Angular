<div class="container">
  <div class="form-header">
    <h1>{{ isEdicao ? 'Editar Produto' : 'Novo Produto' }}</h1>
    <button class="btn btn-outline" (click)="cancelar()">
      Voltar
    </button>
  </div>

  <div *ngIf="erro" class="alert alert-error">
    {{ erro }}
  </div>

  <div *ngIf="sucesso" class="alert alert-success">
    {{ sucesso }}
  </div>

  <div *ngIf="carregando" class="loading">
    {{ isEdicao ? 'Carregando produto...' : 'Salvando produto...' }}
  </div>

  <form *ngIf="!carregando" (ngSubmit)="salvar()" class="produto-form">
    <div class="form-group">
      <label for="nome">Nome *</label>
      <input
        type="text"
        id="nome"
        [(ngModel)]="produto.nome"
        name="nome"
        class="form-control"
        placeholder="Digite o nome do produto"
        maxlength="100"
        required>
      <small class="form-text">Máximo 100 caracteres</small>
    </div>

    <div class="form-group">
      <label for="descricao">Descrição</label>
      <textarea
        id="descricao"
        [(ngModel)]="produto.descricao"
        name="descricao"
        class="form-control"
        placeholder="Digite a descrição do produto"
        rows="4"
        maxlength="500"></textarea>
      <small class="form-text">Máximo 500 caracteres</small>
    </div>

    <div class="form-group">
      <label for="preco">Preço *</label>
      <div class="input-group">
        <span class="input-group-text">R$</span>
        <input
          type="number"
          id="preco"
          [(ngModel)]="produto.preco"
          name="preco"
          class="form-control"
          placeholder="0,00"
          min="0.01"
          max="99999999.99"
          step="0.01"
          (blur)="formatarPreco()"
          required>
      </div>
      <small class="form-text">Digite o preço em reais</small>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="cancelar()">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="carregando">
        {{ isEdicao ? 'Atualizar' : 'Criar' }} Produto
      </button>
    </div>
  </form>
</div>
